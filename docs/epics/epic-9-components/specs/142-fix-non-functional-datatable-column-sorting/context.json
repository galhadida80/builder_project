{
  "files_to_modify": {
    "frontend": [
      "src/components/ui/DataTable.tsx"
    ]
  },
  "files_to_create": {},
  "files_to_reference": [
    "frontend/src/pages/InspectionsPage.tsx",
    "frontend/src/pages/AuditLogPage.tsx"
  ],
  "patterns": {
    "component_pattern": "React functional components with TypeScript generics, using Material-UI components",
    "state_management": "useState hooks for local component state (page, rowsPerPage, orderBy, order)",
    "data_flow": "Props-based data flow - rows passed as prop, pagination and sorting handled internally",
    "typing": "TypeScript with strict typing - Column<T> interface with generic type parameter"
  },
  "existing_implementations": {
    "description": "DataTable component already has sort UI and state management, but missing the actual sorting logic",
    "relevant_files": [
      "frontend/src/components/ui/DataTable.tsx"
    ],
    "key_insights": [
      "State management exists: orderBy and order state variables (lines 83-84)",
      "handleSort function updates state correctly (lines 108-112)",
      "TableSortLabel renders with active/direction props (lines 192-199)",
      "displayedRows calculation applies pagination but NOT sorting (lines 123-125)",
      "InspectionsPage uses sortable: true on scheduledDate column (line 127)",
      "Column interface supports sortable?: boolean flag (line 24)",
      "Need to sort before pagination to ensure correct page contents"
    ]
  },
  "data_types_to_handle": {
    "description": "Columns can contain various data types that need different comparison logic",
    "types": [
      "Strings (equipment names, contact names)",
      "Numbers (IDs, counts)",
      "Dates (scheduledDate, createdAt)",
      "Rendered components (need to sort by underlying data, not JSX)",
      "Nested objects (user.fullName, consultantType.name)"
    ]
  }
}
