{
  "task_description": "# Create Notifications Panel\n\n**Linear Issue:** [BUI-64](https://linear.app/builder-project/issue/BUI-64/create-notifications-panel)\n**Priority:** High\n**Status:** Backlog\n\n## Description\n\nSlide-out with categories - Ref: 14-notifications.png",
  "created_at": "2026-02-01T01:20:17.283950",
  "scoped_services": ["frontend", "backend"],
  "files_to_modify": {
    "frontend": [
      "src/components/layout/Header.tsx"
    ],
    "backend": [
      "app/models/__init__.py",
      "app/schemas/__init__.py",
      "app/api/v1/router.py"
    ]
  },
  "files_to_create": {
    "frontend": [
      "src/components/notifications/NotificationsPanel.tsx",
      "src/components/notifications/NotificationItem.tsx",
      "src/api/notifications.ts",
      "src/hooks/useNotifications.ts",
      "src/types/notification.ts"
    ],
    "backend": [
      "app/models/notification.py",
      "app/schemas/notification.py",
      "app/api/v1/notifications.py"
    ]
  },
  "files_to_reference": [
    "frontend/src/components/ui/Modal.tsx",
    "frontend/src/components/layout/Header.tsx",
    "frontend/src/api/auth.ts",
    "frontend/src/api/client.ts",
    "backend/app/models/meeting.py",
    "backend/app/models/user.py",
    "backend/app/schemas/contact.py",
    "design-assets/dashboard/14-notifications.png"
  ],
  "patterns": {
    "mui_drawer_pattern": "Use MUI Drawer component with anchor='right' for slide-out behavior. Apply Emotion styled() for custom styling like Modal.tsx does with Dialog.",
    "api_client_pattern": "Use apiClient from api/client.ts which auto-adds auth token. Follow auth.ts pattern: export const notificationsApi = { getAll: async () => {...}, markAsRead: async (id) => {...} }",
    "component_structure": "Follow Modal.tsx pattern: import MUI components, create StyledComponents using styled(), export main component with proper TypeScript interface",
    "backend_model_pattern": "Use SQLAlchemy declarative base with Mapped[] type hints, UUID primary keys with uuid.uuid4 default, datetime with utcnow, Foreign keys with cascade deletes",
    "backend_schema_pattern": "Base/Create/Update/Response pattern. Response inherits from CamelCaseModel with from_attributes=True. Use Type | None for optionals, Field() for constraints"
  },
  "existing_implementations": {
    "description": "Header.tsx has placeholder notification Menu (lines 85-130) using MUI Menu component with static mock data. This needs to be replaced with Drawer component. Modal.tsx demonstrates MUI Dialog styling pattern with Emotion.",
    "relevant_files": [
      "frontend/src/components/layout/Header.tsx",
      "frontend/src/components/ui/Modal.tsx",
      "backend/app/models/meeting.py",
      "backend/app/schemas/contact.py"
    ],
    "key_insights": [
      "Header already has NotificationsIcon import and Badge with count=3",
      "Notification click handler exists: handleNotificationOpen/Close with notificationAnchor state",
      "Modal.tsx shows proper Emotion styling: StyledDialog = styled(Dialog)(({ theme }) => ({...}))",
      "Backend models use modern Python syntax: Mapped[str | None] not Optional[str]",
      "All schemas use CamelCaseModel for API responses to convert snake_case to camelCase"
    ]
  },
  "design_reference": {
    "file": "design-assets/dashboard/14-notifications.png",
    "key_elements": {
      "categories": ["All", "Approvals", "Inspections", "Updates"],
      "notification_types": [
        {
          "category": "Approval",
          "example_title": "Steel Rebar Order Approved",
          "icon": "checkmark overlay on avatar",
          "action": "green checkmark icon"
        },
        {
          "category": "Inspection",
          "example_title": "Safety Inspection Failed - Site A",
          "icon": "warning overlay on avatar",
          "action": "eye icon for view"
        },
        {
          "category": "Update",
          "example_title": "New Blueprint Uploaded",
          "icon": "upload overlay on avatar",
          "action": "download icon"
        }
      ],
      "visual_elements": {
        "theme": "dark background (#1e1e1e or similar)",
        "header": "Title + red badge + 'Mark all as read' link",
        "tabs": "Horizontal tabs with blue underline indicator",
        "unread_indicator": "Blue dot on right side",
        "timestamp_format": "Relative time (10 min ago, 2 hours ago, Yesterday)",
        "footer": "Load More button"
      }
    }
  },
  "notification_schema": {
    "fields": [
      "id (UUID)",
      "user_id (UUID, FK to users)",
      "category (enum: approval, inspection, update, general)",
      "title (string)",
      "message (text)",
      "related_entity_type (string, nullable - e.g. 'equipment', 'meeting')",
      "related_entity_id (UUID, nullable)",
      "is_read (boolean, default False)",
      "created_at (datetime)",
      "updated_at (datetime)"
    ]
  }
}
