{
  "complexity": "standard",
  "workflow_type": "feature",
  "confidence": 0.80,
  "reasoning": "Substantial greenfield feature within existing infrastructure requiring 4 interconnected database models, JSONB schema design, and integration with existing construction models. While it touches 15-20+ files, it has no external integrations and likely follows existing CRUD patterns in the codebase.",

  "analysis": {
    "scope": {
      "estimated_files": 18,
      "estimated_services": 1,
      "is_cross_cutting": true,
      "notes": "4 database models + Pydantic schemas + CRUD APIs + migration files + tests. Cross-cutting across database, API, and schema layers within single service."
    },
    "integrations": {
      "external_services": [],
      "new_dependencies": [],
      "research_needed": true,
      "notes": "No external services, but needs research into: Excel data structure, existing construction/project models for integration points, and JSONB schema design patterns in the codebase."
    },
    "infrastructure": {
      "docker_changes": false,
      "database_changes": true,
      "config_changes": false,
      "notes": "4 new database tables with JSONB columns and relationships. Requires database migrations but no new infrastructure components."
    },
    "knowledge": {
      "patterns_exist": true,
      "research_required": true,
      "unfamiliar_tech": [],
      "notes": "Likely existing CRUD patterns in codebase. Research needed for: Excel data parsing, existing construction model integration points, template-based architecture pattern, and JSONB usage best practices."
    },
    "risk": {
      "level": "medium",
      "concerns": [
        "JSONB schema flexibility requires careful design to avoid data integrity issues",
        "Integration with existing construction/project models (unknown coupling points)",
        "State machine logic for inspection lifecycle (Scheduled → Completed → Approved)",
        "Excel data migration and seeding strategy",
        "Template instantiation logic (ConsultantType → ProjectInspection)",
        "Relationship integrity across 4 interconnected models"
      ],
      "notes": "Medium risk due to database schema design complexity, state machine logic, and unknown integration points. No security-critical areas or external dependencies to mitigate risk."
    }
  },

  "recommended_phases": [
    "discovery",
    "requirements",
    "research",
    "context",
    "spec_writing",
    "planning",
    "validation"
  ],

  "flags": {
    "needs_research": true,
    "needs_self_critique": false,
    "needs_infrastructure_setup": false
  },

  "validation_recommendations": {
    "risk_level": "medium",
    "skip_validation": false,
    "minimal_mode": false,
    "test_types_required": ["unit", "integration"],
    "security_scan_required": false,
    "staging_deployment_required": false,
    "reasoning": "Database changes with 4 new models and state machine logic requires unit tests for business logic and integration tests for API/database operations. No security-sensitive areas involved."
  },

  "created_at": "2026-01-29T10:00:00Z"
}
