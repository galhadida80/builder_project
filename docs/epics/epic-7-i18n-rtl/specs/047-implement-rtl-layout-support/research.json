{
  "integrations_researched": [
    {
      "name": "Material-UI (MUI) v5",
      "type": "library",
      "verified_package": {
        "name": "@mui/material",
        "version": "^5.15.6",
        "already_installed": true,
        "verified": true
      },
      "rtl_support": {
        "native_support": true,
        "requires_additional_package": true,
        "additional_package": {
          "name": "@mui/stylis-plugin-rtl",
          "install_command": "npm install @mui/stylis-plugin-rtl",
          "version": "latest",
          "verified": true,
          "note": "Fork of stylis-plugin-rtl to fix issues with CSS layers and support latest Stylis"
        },
        "required_dependencies": [
          {
            "name": "@emotion/cache",
            "install_command": "npm install @emotion/cache",
            "verified": true,
            "already_installed": false,
            "purpose": "Create cache instance for RTL plugin"
          },
          {
            "name": "stylis",
            "install_command": "npm install stylis",
            "verified": true,
            "already_installed": false,
            "purpose": "CSS preprocessor required by stylis-plugin-rtl"
          }
        ]
      },
      "api_patterns": {
        "imports": [
          "import { CacheProvider } from '@emotion/react'",
          "import createCache from '@emotion/cache'",
          "import { prefixer } from 'stylis'",
          "import rtlPlugin from '@mui/stylis-plugin-rtl'"
        ],
        "initialization": "const cacheRtl = createCache({\n  key: 'muirtl',\n  stylisPlugins: [prefixer, rtlPlugin],\n})",
        "usage": "<CacheProvider value={cacheRtl}>{children}</CacheProvider>",
        "theme_configuration": "const theme = createTheme({\n  direction: 'rtl', // or 'ltr'\n  // ... other theme config\n})",
        "key_functions": [
          "createCache(options)",
          "createTheme({ direction: 'rtl' })",
          "CacheProvider"
        ],
        "verified_against": "MUI official documentation"
      },
      "configuration": {
        "html_attribute": "dir=\"rtl\"",
        "theme_direction": "Must set theme.direction to 'rtl'",
        "cache_key": "Use unique key like 'muirtl' for RTL cache",
        "existing_implementation": {
          "theme_direction_already_set": true,
          "html_dir_already_managed": true,
          "missing_emotion_cache": true,
          "missing_stylis_plugin": true
        }
      },
      "gotchas": [
        "Must wrap app with CacheProvider ABOVE ThemeProvider",
        "The direction property in theme must match the dir HTML attribute",
        "Some components (Drawer, Popover, Tooltip) may need placement adjustments",
        "Using !important in CSS overrides (as in current rtl.css) is not recommended - use stylis-plugin-rtl instead",
        "Bundle size increases slightly with stylis and stylis-plugin-rtl packages"
      ],
      "research_sources": [
        "https://mui.com/material-ui/customization/right-to-left/",
        "https://www.npmjs.com/package/@mui/stylis-plugin-rtl",
        "https://medium.com/@massoud-sharifi/material-ui-right-to-left-54e1f0675bb7"
      ]
    },
    {
      "name": "i18next and react-i18next",
      "type": "library",
      "verified_package": {
        "name": "i18next",
        "version": "^25.8.0",
        "already_installed": true,
        "verified": true
      },
      "rtl_support": {
        "native_support": true,
        "built_in_api": "i18n.dir(language)",
        "description": "Built-in method to detect directionality of given locale"
      },
      "api_patterns": {
        "imports": [
          "import { useTranslation } from 'react-i18next'"
        ],
        "key_functions": [
          "i18n.dir() - returns 'ltr' or 'rtl' for current language",
          "i18n.dir(language) - returns direction for specific language"
        ],
        "usage_pattern": "const { i18n } = useTranslation();\nconst direction = i18n.dir(i18n.resolvedLanguage);",
        "existing_implementation": {
          "hook_exists": true,
          "hook_path": "src/hooks/useLanguage.ts",
          "sets_document_dir": true,
          "implementation": "document.documentElement.dir = isRTL ? 'rtl' : 'ltr'"
        },
        "verified_against": "i18next documentation and community examples"
      },
      "configuration": {
        "rtl_languages": ["ar", "he", "fa", "ur"],
        "current_languages": ["en", "he"],
        "hebrew_is_rtl": true,
        "existing_setup": {
          "language_toggle_component": "src/components/common/LanguageToggle.tsx",
          "supports_languages": ["en", "he"],
          "properly_configured": true
        }
      },
      "gotchas": [
        "Numbers and phone numbers should stay LTR even in RTL layouts (use .ltr-content class)",
        "Must update document.dir when language changes (already implemented in useLanguage hook)",
        "Some text (URLs, code, email addresses) should remain LTR regardless of direction"
      ],
      "research_sources": [
        "https://github.com/i18next/next-i18next/discussions/1738",
        "https://medium.com/@saif.as/localization-react-i18-next-and-rtl-support-including-material-ui-to-a-react-project-eeab31817467"
      ]
    },
    {
      "name": "Emotion (CSS-in-JS)",
      "type": "library",
      "verified_package": {
        "name": "@emotion/react",
        "version": "^11.11.3",
        "already_installed": true,
        "verified": true
      },
      "rtl_support": {
        "native_support": false,
        "requires_plugin": true,
        "plugin": "stylis-plugin-rtl (via @mui/stylis-plugin-rtl)",
        "implementation": "Use CacheProvider from @emotion/react with stylis-plugin-rtl"
      },
      "api_patterns": {
        "imports": [
          "import { CacheProvider } from '@emotion/react'",
          "import createCache from '@emotion/cache'"
        ],
        "implementation_note": "Emotion 11 supports stylis v4, which is compatible with stylis-plugin-rtl v2",
        "verified_against": "Emotion documentation and GitHub issues"
      },
      "configuration": {
        "version_compatibility": {
          "emotion_11": "Compatible with stylis v4 and stylis-plugin-rtl v2",
          "current_version": "11.11.3",
          "compatible": true
        }
      },
      "gotchas": [
        "Emotion 11 works with stylis-plugin-rtl v2 (older Emotion versions need v1)",
        "CacheProvider must wrap the entire app or at least all styled components",
        "Cache instances are memoized - create them outside render functions"
      ],
      "research_sources": [
        "https://github.com/emotion-js/emotion/issues/793",
        "https://emotion.sh/docs/introduction",
        "https://copyprogramming.com/howto/how-to-add-dynamic-rtl-support-for-next-js-material-ui-emotion"
      ]
    },
    {
      "name": "CSS Logical Properties",
      "type": "web-standard",
      "verified_package": {
        "name": "N/A - Native CSS feature",
        "install_command": "No installation required",
        "verified": true
      },
      "browser_support": {
        "chrome": "Full support since v89 (2021)",
        "firefox": "Full support since v66 (2019)",
        "safari": "Full support since v15 (2021) - partial in 12.2",
        "edge": "Full support since v99 (2022)",
        "overall": "Excellent - all modern browsers support",
        "can_use": true
      },
      "api_patterns": {
        "physical_to_logical_mapping": {
          "margin-left": "margin-inline-start",
          "margin-right": "margin-inline-end",
          "padding-left": "padding-inline-start",
          "padding-right": "padding-inline-end",
          "border-left": "border-inline-start",
          "border-right": "border-inline-end",
          "left": "inset-inline-start",
          "right": "inset-inline-end",
          "text-align: left": "text-align: start",
          "text-align: right": "text-align: end"
        },
        "usage_note": "Logical properties automatically adapt to text direction without needing dir-specific rules"
      },
      "current_implementation": {
        "uses_physical_properties": true,
        "uses_important_overrides": true,
        "rtl_css_file": "src/styles/rtl.css",
        "needs_migration": true,
        "migration_benefit": "Remove !important overrides and dir-specific rules by using logical properties"
      },
      "gotchas": [
        "Older browsers (IE11, pre-2019 browsers) don't support logical properties",
        "Mix of logical and physical properties in same context can cause confusion",
        "Grid and flexbox have their own logical properties (start/end vs left/right)",
        "Transform operations (translateX) don't automatically flip - still need manual RTL handling"
      ],
      "research_sources": [
        "https://caniuse.com/css-logical-props",
        "https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_logical_properties_and_values",
        "https://css-tricks.com/css-logical-properties-and-values/"
      ]
    }
  ],
  "existing_infrastructure": {
    "rtl_partially_implemented": true,
    "components_found": [
      {
        "file": "src/hooks/useLanguage.ts",
        "purpose": "Manages language state and sets document.dir attribute",
        "status": "Working correctly"
      },
      {
        "file": "src/components/common/LanguageToggle.tsx",
        "purpose": "UI component for switching between English and Hebrew",
        "status": "Working correctly"
      },
      {
        "file": "src/theme/ThemeContext.tsx",
        "purpose": "Theme provider that sets MUI theme direction based on language",
        "status": "Partially complete - needs CacheProvider integration"
      },
      {
        "file": "src/theme/rtl.ts",
        "purpose": "Helper function to determine text direction from language code",
        "status": "Working correctly"
      },
      {
        "file": "src/styles/rtl.css",
        "purpose": "Manual RTL overrides using physical properties and !important",
        "status": "Works but not ideal - should migrate to stylis-plugin-rtl"
      }
    ],
    "missing_pieces": [
      "@mui/stylis-plugin-rtl package",
      "@emotion/cache package",
      "stylis package",
      "CacheProvider integration in ThemeContext",
      "Migration from manual CSS overrides to automatic RTL transformation"
    ]
  },
  "unverified_claims": [],
  "recommendations": [
    {
      "priority": "high",
      "recommendation": "Install @mui/stylis-plugin-rtl, @emotion/cache, and stylis packages",
      "reason": "Required for proper MUI RTL support without manual CSS overrides"
    },
    {
      "priority": "high",
      "recommendation": "Integrate CacheProvider with rtlPlugin into ThemeContext.tsx",
      "reason": "MUI components need the Emotion cache with RTL plugin to auto-transform styles"
    },
    {
      "priority": "medium",
      "recommendation": "Gradually migrate from rtl.css manual overrides to letting stylis-plugin-rtl handle transformations",
      "reason": "Reduces maintenance burden and eliminates !important usage"
    },
    {
      "priority": "medium",
      "recommendation": "Consider migrating custom CSS to use logical properties where possible",
      "reason": "More maintainable and automatically bidirectional"
    },
    {
      "priority": "low",
      "recommendation": "Add RTL visual regression tests using the Hebrew screenshot reference",
      "reason": "Ensure RTL layout matches design specifications"
    },
    {
      "priority": "low",
      "recommendation": "Review icon components for directionality - some icons should flip in RTL (arrows, chevrons) while others shouldn't (logos, symbols)",
      "reason": "Proper UX in RTL contexts"
    }
  ],
  "implementation_approach": {
    "step_1": "Install required packages: @mui/stylis-plugin-rtl, @emotion/cache, stylis",
    "step_2": "Create RTL and LTR cache instances in a new utility file",
    "step_3": "Wrap app with CacheProvider in ThemeContext.tsx based on current direction",
    "step_4": "Test with Hebrew language to verify MUI components render correctly",
    "step_5": "Gradually remove manual overrides from rtl.css as stylis-plugin handles them",
    "step_6": "Validate against 29-hebrew-rtl.png screenshot"
  },
  "reference_assets": {
    "screenshot": "29-hebrew-rtl.png",
    "description": "Hebrew RTL layout reference showing expected behavior"
  },
  "tech_stack_summary": {
    "framework": "React 18.2.0",
    "ui_library": "Material-UI (MUI) v5.15.6",
    "styling": "Emotion (CSS-in-JS)",
    "i18n": "i18next + react-i18next",
    "build_tool": "Vite",
    "languages_supported": ["English", "Hebrew"]
  },
  "created_at": "2026-02-01T12:00:00Z"
}
