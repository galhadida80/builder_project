{
  "files_to_modify": {
    "frontend": [
      "frontend/package.json",
      "frontend/src/theme/ThemeContext.tsx",
      "frontend/src/main.tsx",
      "frontend/src/components/layout/Header.tsx",
      "frontend/src/components/layout/Layout.tsx",
      "frontend/src/components/layout/Sidebar.tsx",
      "frontend/src/components/ui/ProgressBar.tsx",
      "frontend/src/pages/LoginPage.tsx",
      "frontend/src/pages/ContactsPage.tsx",
      "frontend/src/styles/rtl.css"
    ]
  },
  "files_to_reference": [
    "frontend/src/hooks/useLanguage.ts",
    "frontend/src/theme/theme.ts",
    "frontend/src/theme/tokens.ts",
    "frontend/src/i18n/config.ts"
  ],
  "patterns": {
    "rtl_detection": "useLanguage hook already sets dir attribute on document.documentElement",
    "language_switching": "LanguageToggle component in Header provides UI for switching between en/he",
    "mui_theme": "Theme uses Emotion and MUI - needs RTL cache provider configuration",
    "existing_rtl_approach": "Current implementation uses conditional physical properties (ml/mr based on isRTL) and rtl.css overrides - this needs to be replaced with CSS logical properties"
  },
  "existing_implementations": {
    "description": "Basic RTL infrastructure exists but uses outdated approach (physical property overrides). Need to migrate to CSS logical properties.",
    "relevant_files": [
      "frontend/src/theme/rtl.ts",
      "frontend/src/styles/rtl.css",
      "frontend/src/hooks/useLanguage.ts",
      "frontend/src/components/common/LanguageToggle.tsx",
      "frontend/src/i18n/locales/he.json"
    ],
    "findings": {
      "rtl_mechanism": "useLanguage hook sets document.documentElement.dir based on current language (he = rtl)",
      "conditional_styling": "Header and Layout components use conditional ml/mr properties based on isRTL flag",
      "legacy_css": "rtl.css contains physical property overrides like 'margin-right: 260px !important' - should be removed",
      "missing_dependencies": [
        "stylis-plugin-rtl",
        "@emotion/cache"
      ],
      "components_with_physical_properties": [
        "Header.tsx (line 68): conditional ml/mr",
        "Layout.tsx (line 88): conditional ml/mr",
        "Sidebar.tsx (line 87): borderRight",
        "ProgressBar.tsx (lines 117-120): absolute positioning with left/right/top/bottom",
        "LoginPage.tsx (lines 125-126, 220, 286): absolute positioning and text-align",
        "ContactsPage.tsx (lines 294, 359): absolute positioning with right"
      ]
    }
  },
  "created_at": "2026-02-01T01:23:00.000Z",
  "task_description": "Migrate existing RTL (Right-to-Left) layout implementation from physical CSS properties (left/right) to CSS logical properties (inline-start/end) for proper bidirectional layout support. This involves installing RTL dependencies (stylis-plugin-rtl, @emotion/cache), configuring MUI RTL cache provider, and replacing all conditional physical directional properties with logical equivalents across layout and component files."
}