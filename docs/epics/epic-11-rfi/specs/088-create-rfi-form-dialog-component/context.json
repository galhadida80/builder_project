{
  "task_description": "# Create RFI Form Dialog Component\n\n**Linear Issue:** [BUI-105](https://linear.app/builder-project/issue/BUI-105/create-rfi-form-dialog-component)\n**Priority:** No priority\n**Status:** Backlog\n\n## User Story\n\nAs a user, I want to create new RFIs through a form so that I can submit questions to consultants.\n\n## Acceptance Criteria\n\n- [ ] Create `RFIFormDialog` component\n- [ ] Form fields: To email (required, email validation), To name, CC emails (multi-input), Subject (required), Category dropdown, Priority dropdown, Due date picker, Question (rich text editor), Location reference, Drawing/specification reference, Attachments upload (multi-file)\n- [ ] Form validation with error messages\n- [ ] \"Save as Draft\" button\n- [ ] \"Send Now\" button\n- [ ] Loading states during submission\n\n## Labels\n\nfrontend, component, rfi\n",
  "scoped_services": ["frontend"],
  "files_to_modify": ["frontend/package.json"],
  "files_to_create": [
    "frontend/src/components/RFI/RFIFormDialog.tsx",
    "frontend/src/components/RFI/index.ts"
  ],
  "files_to_reference": [
    "frontend/src/components/ui/Modal.tsx",
    "frontend/src/api/rfi.ts",
    "frontend/src/components/ui/Button.tsx",
    "frontend/src/components/ui/TextField.tsx"
  ],
  "patterns": {
    "dialog_pattern": "Use FormModal component from ui/Modal.tsx with onSubmit prop and loading state",
    "button_pattern": "Use Button component with loading prop for submit actions",
    "api_pattern": "Use rfiApi.create() and rfiApi.send() from api/rfi.ts",
    "styled_components": "Use styled() from @mui/material/styles for custom styling",
    "controller_pattern": "CRITICAL: All MUI inputs must use Controller from react-hook-form, NOT register()"
  },
  "existing_implementations": {
    "description": "Found comprehensive RFI API with create/send methods, existing Modal/FormModal components with loading states, and custom Button/TextField wrappers",
    "relevant_files": [
      "frontend/src/components/ui/Modal.tsx",
      "frontend/src/api/rfi.ts",
      "frontend/src/components/ui/Button.tsx"
    ],
    "key_insights": [
      "FormModal component already handles form submission, cancel, and loading states",
      "rfiApi.create() accepts RFICreate data, rfiApi.send() takes rfiId",
      "Button component has built-in loading spinner support",
      "Constants RFI_PRIORITY_OPTIONS and RFI_CATEGORY_OPTIONS already defined"
    ]
  },
  "new_dependencies": [
    "react-hook-form",
    "zod",
    "@hookform/resolvers",
    "mui-tiptap",
    "@tiptap/react",
    "@tiptap/starter-kit"
  ],
  "created_at": "2026-02-02T12:39:35.668620"
}
