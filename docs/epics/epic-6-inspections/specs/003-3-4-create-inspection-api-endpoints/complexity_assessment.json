{
  "complexity": "standard",
  "workflow_type": "feature",
  "confidence": 0.85,
  "reasoning": "Creating 14 new API endpoints with database schema requires multiple files (endpoints, models, schemas, migrations). However, existing FastAPI patterns in the codebase make this standard rather than complex. No external integrations or unfamiliar technologies.",

  "analysis": {
    "scope": {
      "estimated_files": 7,
      "estimated_services": 1,
      "is_cross_cutting": false,
      "notes": "New inspections.py endpoint file, models file, schemas file, Alembic migration, router registration. Potentially test files. All contained to backend service."
    },
    "integrations": {
      "external_services": [],
      "new_dependencies": [],
      "research_needed": false,
      "notes": "Pure internal API creation using existing FastAPI, SQLAlchemy, and Alembic infrastructure. No external services."
    },
    "infrastructure": {
      "docker_changes": false,
      "database_changes": true,
      "config_changes": false,
      "notes": "Database schema creation for 4 tables (InspectionConsultantType, InspectionStage, Inspection, Finding) using existing Alembic migration system. No Docker or environment config changes."
    },
    "knowledge": {
      "patterns_exist": true,
      "research_required": false,
      "unfamiliar_tech": [],
      "notes": "Codebase has extensive existing patterns: equipment.py, meetings.py, materials.py, contacts.py all follow same FastAPI + SQLAlchemy pattern. Strong precedent for project-scoped endpoints."
    },
    "risk": {
      "level": "medium",
      "concerns": [
        "Database schema design - hierarchical relationships (templates vs instances)",
        "Foreign key constraints and cascading deletes",
        "Template/instance separation must be clear",
        "Proper indexing for performance"
      ],
      "notes": "Medium risk due to database changes and relationship complexity. Not security-critical. Standard CRUD operations with hierarchical data model."
    }
  },

  "recommended_phases": [
    "discovery",
    "requirements",
    "context",
    "spec_writing",
    "planning",
    "validation"
  ],

  "flags": {
    "needs_research": false,
    "needs_self_critique": false,
    "needs_infrastructure_setup": false
  },

  "validation_recommendations": {
    "risk_level": "medium",
    "skip_validation": false,
    "minimal_mode": false,
    "test_types_required": ["unit", "integration"],
    "security_scan_required": false,
    "staging_deployment_required": false,
    "reasoning": "Database schema changes and 14 new endpoints warrant thorough testing. Unit tests for business logic and integration tests for API layer required. No security-critical operations (no auth changes, payments, or sensitive data handling)."
  },

  "created_at": "2026-01-29T00:00:00Z"
}
