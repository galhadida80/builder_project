{
  "complexity": "standard",
  "workflow_type": "migration",
  "confidence": 0.85,
  "reasoning": "Database migration creating 4 related tables with foreign key relationships and indexes. Well-defined scope using existing Alembic patterns, but requires careful attention to schema relationships and migration reversibility.",

  "analysis": {
    "scope": {
      "estimated_files": 5,
      "estimated_services": 1,
      "is_cross_cutting": false,
      "notes": "Migration file plus potential SQLAlchemy model definitions. Contained to backend database layer."
    },
    "integrations": {
      "external_services": [],
      "new_dependencies": [],
      "research_needed": false,
      "notes": "Alembic is already in use. No external services involved."
    },
    "infrastructure": {
      "docker_changes": false,
      "database_changes": true,
      "config_changes": false,
      "notes": "Schema migration adds 4 new tables with relationships. No new infrastructure needed, just schema evolution."
    },
    "knowledge": {
      "patterns_exist": true,
      "research_required": false,
      "unfamiliar_tech": [],
      "notes": "Project already uses Alembic. Standard database migration workflow."
    },
    "risk": {
      "level": "medium",
      "concerns": [
        "Foreign key relationships must reference existing tables correctly",
        "Migration must be reversible (downgrade path)",
        "Index naming conventions must match existing patterns",
        "Need to verify projects table exists for foreign key reference"
      ],
      "notes": "Database schema changes are inherently risky but this is a controlled migration. Need to verify existing schema before defining relationships."
    }
  },

  "recommended_phases": [
    "discovery",
    "requirements",
    "context",
    "spec_writing",
    "planning",
    "validation"
  ],

  "flags": {
    "needs_research": false,
    "needs_self_critique": false,
    "needs_infrastructure_setup": false
  },

  "validation_recommendations": {
    "risk_level": "high",
    "skip_validation": false,
    "minimal_mode": false,
    "test_types_required": ["integration"],
    "security_scan_required": false,
    "staging_deployment_required": false,
    "reasoning": "Database migrations are high-risk as they affect data persistence. Requires integration tests to verify migration runs successfully, tables are created with correct schema, and foreign key constraints work properly. No security implications or staging needed."
  },

  "created_at": "2026-01-29T00:00:00Z"
}
