{
  "complexity": "standard",
  "workflow_type": "feature",
  "confidence": 0.85,
  "reasoning": "This is a well-defined model creation task following existing SQLAlchemy patterns. It requires database migration and careful FK relationship handling, but scope is contained to 1-2 files with no external integrations or research needed.",

  "analysis": {
    "scope": {
      "estimated_files": 2,
      "estimated_services": 1,
      "is_cross_cutting": false,
      "notes": "Main file: backend/app/models/equipment_template.py. Likely needs database migration file. Localized to backend models layer."
    },
    "integrations": {
      "external_services": [],
      "new_dependencies": [],
      "research_needed": false,
      "notes": "No external integrations. All FK relationships to existing internal models (Project, EquipmentTemplate, User, ConsultantType). SQLAlchemy already in use."
    },
    "infrastructure": {
      "docker_changes": false,
      "database_changes": true,
      "config_changes": false,
      "notes": "Requires database migration for two new tables (EquipmentApprovalSubmission, EquipmentApprovalDecision). Standard Alembic migration workflow."
    },
    "knowledge": {
      "patterns_exist": true,
      "research_required": false,
      "unfamiliar_tech": [],
      "notes": "Extending existing equipment_template.py file suggests established model patterns exist. Standard SQLAlchemy model creation with relationships, enums, and JSONB fields."
    },
    "risk": {
      "level": "medium",
      "concerns": [
        "Multiple FK relationships must reference existing models correctly",
        "JSONB fields require proper PostgreSQL setup and indexing strategy",
        "Enum types (status, decision) need proper SQLAlchemy definition",
        "Migration needs to handle foreign key constraints properly",
        "Relationship back-references need proper naming to avoid conflicts"
      ],
      "notes": "Medium risk due to database schema changes and FK dependencies. However, patterns are well-established in SQLAlchemy ecosystem."
    }
  },

  "recommended_phases": [
    "discovery",
    "requirements",
    "context",
    "spec_writing",
    "planning",
    "validation"
  ],

  "flags": {
    "needs_research": false,
    "needs_self_critique": false,
    "needs_infrastructure_setup": false
  },

  "validation_recommendations": {
    "risk_level": "medium",
    "skip_validation": false,
    "minimal_mode": false,
    "test_types_required": ["unit", "integration"],
    "security_scan_required": false,
    "staging_deployment_required": false,
    "reasoning": "Database schema changes with FK relationships require unit tests for model constraints and integration tests for relationship loading. No security-sensitive operations beyond standard model CRUD."
  },

  "created_at": "2026-01-29T00:00:00Z"
}
