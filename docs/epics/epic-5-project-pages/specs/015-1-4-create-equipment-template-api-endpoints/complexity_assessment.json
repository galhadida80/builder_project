{
  "complexity": "standard",
  "workflow_type": "feature",
  "confidence": 0.85,
  "reasoning": "Standard FastAPI CRUD endpoints following existing patterns. Multiple files needed (models, schemas, routes, CRUD) with database migration, but all patterns exist in codebase. Admin authorization adds complexity but similar patterns exist.",

  "analysis": {
    "scope": {
      "estimated_files": 7,
      "estimated_services": 1,
      "is_cross_cutting": false,
      "notes": "New equipment_templates.py route file, 3 model files (or additions), schema files, CRUD operations, router registration, and Alembic migration"
    },
    "integrations": {
      "external_services": [],
      "new_dependencies": [],
      "research_needed": false,
      "notes": "All dependencies (FastAPI, SQLAlchemy, Pydantic, Alembic) already exist in stack"
    },
    "infrastructure": {
      "docker_changes": false,
      "database_changes": true,
      "config_changes": false,
      "notes": "Requires Alembic migration for new tables (EquipmentTemplate, EquipmentSubmission, ApprovalDecision). No Docker or environment config changes needed."
    },
    "knowledge": {
      "patterns_exist": true,
      "research_required": false,
      "unfamiliar_tech": [],
      "notes": "Strong patterns exist in similar files: equipment.py (project-scoped CRUD), materials.py (submit pattern), approvals.py (decision pattern), meetings.py (nested resources)"
    },
    "risk": {
      "level": "medium",
      "concerns": [
        "Admin authorization must be correctly implemented for template endpoints",
        "Project-scoped access control for submission endpoints",
        "Database relationships between templates, submissions, and decisions",
        "Approval/decision workflow logic must be sound"
      ],
      "notes": "Authorization and data relationships are the main risk factors. Database migration must be carefully designed."
    }
  },

  "recommended_phases": [
    "discovery",
    "requirements",
    "context",
    "spec_writing",
    "planning",
    "validation"
  ],

  "flags": {
    "needs_research": false,
    "needs_self_critique": false,
    "needs_infrastructure_setup": false
  },

  "validation_recommendations": {
    "risk_level": "medium",
    "skip_validation": false,
    "minimal_mode": false,
    "test_types_required": ["unit", "integration"],
    "security_scan_required": true,
    "staging_deployment_required": false,
    "reasoning": "Database changes and admin authorization logic require comprehensive testing. Security scan needed for admin access control verification. No staging deployment required since no infrastructure changes."
  },

  "created_at": "2026-01-29T00:00:00Z"
}
